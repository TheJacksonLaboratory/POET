<div class="dashboard-wrapper">
  <div class="flex-row dashboard" fxflexlayout="row wrap">
    <mat-card class="dash-card" fxFlex="90" fxFlexOffset="5">
      <mat-card-title>Phenomic Observation Explication Tool</mat-card-title>
      <mat-card-content>
        <div fxflexlayout="row">
          <div class="search-wrapper">
            <app-search [role]="userRole"></app-search>
          </div>
        </div>
        <div class="card-row" fxflexlayout="row">
          <div fxFlex="90" fxFlexOffset="5">
            <mat-tab-group animationDuration="1ms">
              <mat-tab label="Recent Activity">
                <mat-list *ngFor="let recent of recentActivity">
                  <mat-list-item [routerLink]="'/curate/' + recent.diseaseId" class="activity-item">
                    <h4>{{recent.view}}</h4>
                    <span class="spacer"></span>
                    <button mat-stroked-button>View Disease</button>
                  </mat-list-item>
                </mat-list>
                <p class="no-activity" *ngIf="recentActivity?.length == 0 || !recentActivity">No Recent Activity.</p>
                <mat-paginator *ngIf="recentActivity?.length > 0" [length]="recentActivity?.length" pageSize=5
                               (page)="getPaginatorData($event)"
                               showFirstLastButtons="false">
                </mat-paginator>
              </mat-tab>
              <mat-tab label="Reviews" *ngIf="userService.isElevatedCurator(userRole) && reviews?.length > 0">
                <mat-list *ngFor="let review of reviews">
                  <mat-list-item class="activity-item">
                    <h4>{{review.count}} {{review.type}} annotations ready to be reviewed for {{review.diseaseName}}.</h4>
                    <span class="spacer"></span>
                    <button mat-stroked-button [routerLink]="'/curate/' + review.diseaseId + '/' + review.type">View Disease</button>
                  </mat-list-item>
                </mat-list>
              </mat-tab>
              <mat-tab label="Needs Work" *ngIf="userAnnotations?.length > 0">
                <mat-list *ngFor="let annotation of userAnnotations">
                  <mat-list-item class="activity-item">
                    <h4>{{annotation.count}} {{annotation.type}} annotations need work for {{annotation.diseaseName}}.</h4>
                    <span class="spacer"></span>
                    <button mat-stroked-button [routerLink]="'/curate/' + annotation.diseaseId + '/' + annotation.type">View Disease</button>
                  </mat-list-item>
                </mat-list>
              </mat-tab>
              <mat-tab label="Most Curated" [disabled]="true">Most Curated Diseases</mat-tab>
              <mat-tab label="Contributions" [disabled]="noContributions()">
                <div class="chart-wrapper" *ngIf="!noContributions()">
                  <ngx-charts-pie-chart
                    [results]="pieData"
                    legend="true"
                    legendTitle="Legend"
                    legendPosition="bottom"
                    explodeSlices="true"
                    gradient="true"
                    scheme="ocean"
                  >
                  </ngx-charts-pie-chart>
                </div>
              </mat-tab>
        </mat-tab-group>
        </div>
        </div>
      </mat-card-content>
    </mat-card>
  </div>
<!--  <div fxflexlayout="row" class="flex-row">-->
<!--    <mat-card class="contribution-donut-card" fxFlex="40" fxFlexOffset="10">-->
<!--      <mat-card-title>-->
<!--        Contributions-->
<!--      </mat-card-title>-->
<!--      <mat-card-content>-->
<!--        <div class="no-contributions" *ngIf="pieData?.length === 0">-->
<!--          <h4>No official contributions yet!</h4>-->
<!--          <button mat-raised-button color="accent">Get Started</button>-->
<!--        </div>-->
<!--      </mat-card-content>-->
<!--    </mat-card>-->
<!--    <mat-card class="contribution-overtime-card" fxFlex="40">-->
<!--      <mat-card-title>-->
<!--        Daily Activity-->
<!--      </mat-card-title>-->
<!--      <mat-card-content>-->
<!--        <div class="chart-wrapper">-->
<!--          <ngx-charts-line-chart-->
<!--            [results]="lineData"-->
<!--            [view]="[650, 300]"-->
<!--            xAxis="Day"-->
<!--            yAxis="Annotations"-->
<!--            showXAxisLabel="true"-->
<!--            showYAxisLabel="true"-->
<!--            gradient="true"-->
<!--            scheme="ocean"-->
<!--          >-->
<!--          </ngx-charts-line-chart>-->
<!--        </div>-->
<!--      </mat-card-content>-->
<!--    </mat-card>-->
<!--  </div>-->
</div>
