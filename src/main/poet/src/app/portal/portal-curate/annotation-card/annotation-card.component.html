<mat-card [@bounceInLeft]="triggerBounceIn" class="annotation-card">
  <mat-card-title>
    <span *ngIf="category == 'treatment'">Treatments</span>
    <span *ngIf="category == 'phenotype'">Phenotypes</span>
    <button class="add-annotation-btn-top" mat-mini-fab color="primary" aria-label="Add Annotation"
            *ngIf="isUser() && ((treatmentAnnotations | async)?.length > 0 && this.category == 'treatment') ||
            ((phenotypeAnnotations | async)?.length > 0 && this.category == 'phenotype')"
            (click)="annotationAction(null, 'create')">
      <mat-icon>add</mat-icon>
    </button>
  </mat-card-title>
  <mat-card-subtitle>
    <span *ngIf="category == 'treatment'">A list of curated medical actions for this disease.</span>
    <span *ngIf="category == 'phenotype'">A list of curated phenotypes of this disease</span><br><br>
  </mat-card-subtitle>
  <mat-card-content>
    <!--<mat-form-field appearance="fill" *ngIf="(maxoAnnotations | async)?.length > 0">
      <mat-label>Annotation Status</mat-label>
      <mat-select multiple [(ngModel)]="selectedStatuses">
        <mat-option *ngFor="let status of annotationStatuses" [value]="status">{{status}}</mat-option>
      </mat-select>
    </mat-form-field>-->
    <mat-list #treatment *ngIf="category === 'treatment'">
      <mat-list-item class="selection-wrapper mat-elevation-z3"
                     [ngClass]="{'active': treatment == activeAnnotation}"
                     *ngFor="let treatment of treatmentAnnotations | async | slice: lowValue : highValue">
        <mat-icon matListIcon>health_and_safety</mat-icon>
        <div class="selection-text" *ngIf="formOpen">
          <span matLine class="selection-id">
            <strong>{{treatment.maxoName}}</strong>
          </span>
          <span matLine class="selection-id">
            {{treatment.relation}} <strong>{{treatment.hpoName}}</strong>
          </span>
        </div>
        <div class="selection-text" *ngIf="!formOpen">
          <span matLine class="selection-id">
            <strong>{{treatment.maxoName}}</strong> {{treatment.relation}} <strong>{{treatment.hpoName}}</strong>
          </span>
        </div>
        <div class="spacer"></div>
        <button mat-icon-button aria-label="Edit Treatment Annotation" *ngIf="isUser()" [disabled]="!isUser()"
                (click)="annotationAction(treatment, 'edit')">
          <mat-icon>create</mat-icon>
        </button>
        <button mat-icon-button aria-label="Delete Treatment Annotation" *ngIf="isElevatedCurator() || isUser()"
                [disabled]="!isUser()"
                (click)="annotationAction(treatment, 'delete')">
          <mat-icon>delete</mat-icon>
        </button>
        <button mat-icon-button aria-label="View Treatment Annotation"
                (click)="annotationAction(treatment, 'view')">
          <mat-icon>launch</mat-icon>
        </button>
      </mat-list-item>
    </mat-list>
    <mat-list #phenotype *ngIf="category === 'phenotype'" class="phenotype-list">
      <mat-list-item class="selection-wrapper mat-elevation-z3"
                     [ngClass]="{'active': phenotype == activeAnnotation}"
                     *ngFor="let phenotype of phenotypeAnnotations | async | slice: lowValue : highValue">
        <mat-icon matListIcon>attribution</mat-icon>
        <div matLine class="selection-text" *ngIf="formOpen">
          <strong>{{phenotype.hpoName}}</strong>
          <span class="selection-id">
             {{phenotype.hpoId}}
          </span>
        </div>
        <div matLine class="selection-text" *ngIf="!formOpen">
          <strong>{{phenotype.hpoName}}</strong>
          <span class="selection-id">
            {{phenotype.hpoId}}
          </span>
        </div>
        <div class="spacer"></div>
        <button mat-icon-button aria-label="Edit Phenotype Annotation" *ngIf="isUser()" [disabled]="!isUser()"
                (click)="annotationAction(phenotype, 'edit')">
          <mat-icon>create</mat-icon>
        </button>
        <button mat-icon-button aria-label="Delete Phenotype Annotation" *ngIf="isElevatedCurator() || isUser()"
                [disabled]="!isUser()"
                (click)="annotationAction(phenotype, 'delete')">
          <mat-icon>delete</mat-icon>
        </button>
        <button mat-icon-button aria-label="View Phenotype Annotation"
                (click)="annotationAction(phenotype, 'view')">
          <mat-icon>launch</mat-icon>
        </button>
      </mat-list-item>
    </mat-list>
    <mat-paginator *ngIf="(treatmentAnnotations | async)?.length > 0 && category === 'treatment'" [length]="(treatmentAnnotations | async)?.length"
                   [pageSize]="5"
                   [pageSizeOptions]="[5, 10, 25]"
                   (page)="getPaginatorData($event)"
                   showFirstLastButtons="false">
    </mat-paginator>
    <mat-paginator *ngIf="(phenotypeAnnotations | async)?.length > 0 && category === 'phenotype'" [length]="(phenotypeAnnotations | async)?.length" pageSize=5
                   (page)="getPaginatorData($event)"
                   showFirstLastButtons="false">
    </mat-paginator>
    <div class="annotation-missing" *ngIf="((treatmentAnnotations | async)?.length == 0 && this.category == 'treatment')
    || ((phenotypeAnnotations | async)?.length == 0  && this.category == 'phenotype')">
      No {{categoryToDisplay()}} Found.
    </div>
    <button class="add-annotation-btn" mat-mini-fab color="primary" aria-label="Add Annotation"
            *ngIf="isUser() && ((treatmentAnnotations | async)?.length == 0 && this.category == 'treatment')
    || ((phenotypeAnnotations | async)?.length == 0  && this.category == 'phenotype')"
            (click)="annotationAction(null, 'create')">
      <mat-icon>add</mat-icon>
    </button>
  </mat-card-content>
</mat-card>
